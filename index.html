<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FT-IV Renewable Energy Portfolio</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #27ae60;
            --text: #333;
            --light-bg: #ecf0f1;
            --card-bg: #ffffff;
            --shadow: rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            overflow-x: hidden;
            position: relative;
        }

        /* Animated Background Particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            animation: float 15s infinite;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0) translateX(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) translateX(100px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Sidebar Navigation */
        .sidebar {
            width: 280px;
            background: rgba(44, 62, 80, 0.95);
            backdrop-filter: blur(10px);
            color: white;
            padding: 2rem 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            box-shadow: 4px 0 20px var(--shadow);
            transition: all 0.3s ease;
            z-index: 100;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sidebar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(180deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            pointer-events: none;
        }

        .sidebar-header {
            padding: 0 2rem 2rem 2rem;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
            position: relative;
            animation: slideInLeft 0.6s ease;
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .sidebar-header h1 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: glow 2s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% {
                filter: brightness(1);
            }
            50% {
                filter: brightness(1.3);
            }
        }

        .sidebar-header p {
            font-size: 0.9rem;
            color: #bdc3c7;
        }

        .nav-menu {
            list-style: none;
            padding: 2rem 0;
        }

        .nav-item {
            margin: 0.5rem 0;
            animation: slideInLeft 0.6s ease;
            animation-fill-mode: both;
        }

        .nav-item:nth-child(1) { animation-delay: 0.1s; }
        .nav-item:nth-child(2) { animation-delay: 0.2s; }
        .nav-item:nth-child(3) { animation-delay: 0.3s; }
        .nav-item:nth-child(4) { animation-delay: 0.4s; }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 1rem 2rem;
            color: white;
            text-decoration: none;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border-left: 4px solid transparent;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .nav-link::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 0;
            background: linear-gradient(90deg, rgba(52, 152, 219, 0.3), rgba(52, 152, 219, 0.1));
            transition: width 0.4s ease;
            z-index: -1;
        }

        .nav-link:hover::before {
            width: 100%;
        }

        .nav-link:hover {
            background: rgba(255, 255, 255, 0.1);
            border-left-color: var(--secondary);
            transform: translateX(10px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .nav-link.active {
            background: rgba(52, 152, 219, 0.2);
            border-left-color: var(--secondary);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }

        .nav-link.active::after {
            content: '‚Üí';
            position: absolute;
            right: 2rem;
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateX(0);
            }
            50% {
                transform: translateX(5px);
            }
        }

        .nav-icon {
            margin-right: 1rem;
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }

        .nav-link:hover .nav-icon {
            transform: scale(1.2) rotate(10deg);
        }

        /* Main Content */
        .main-content {
            margin-left: 280px;
            flex: 1;
            padding: 3rem;
            overflow-y: auto;
        }

        .content-section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hero-section {
            background: var(--card-bg);
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 0 10px 40px var(--shadow);
            margin-bottom: 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
            transition: all 0.4s ease;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(102, 126, 234, 0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        .hero-section:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
        }

        .hero-section h1 {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 1rem;
            position: relative;
            z-index: 1;
            animation: fadeInDown 0.8s ease;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hero-section p {
            font-size: 1.2rem;
            color: #666;
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
            animation: fadeInUp 0.8s ease 0.2s both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .activity-card {
            background: var(--card-bg);
            padding: 2.5rem;
            border-radius: 20px;
            box-shadow: 0 10px 40px var(--shadow);
            margin-bottom: 2rem;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .activity-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            transform: rotate(45deg);
            transition: all 0.6s ease;
        }

        .activity-card:hover::before {
            left: 100%;
        }

        .activity-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
        }

        .activity-header {
            border-bottom: 3px solid var(--secondary);
            padding-bottom: 1rem;
            margin-bottom: 2rem;
        }

        .activity-header h2 {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .activity-header .badge {
            display: inline-block;
            padding: 0.4rem 1rem;
            background: linear-gradient(135deg, var(--secondary), var(--accent));
            color: white;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            animation: pulse 2s ease-in-out infinite;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.4);
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 4px 15px rgba(52, 152, 219, 0.4);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 6px 20px rgba(52, 152, 219, 0.6);
            }
        }

        .diagram-container {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
            text-align: center;
            border: 2px dashed var(--secondary);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .diagram-container:hover {
            border-style: solid;
            box-shadow: 0 10px 30px rgba(52, 152, 219, 0.3);
            transform: scale(1.02);
        }

        .diagram-container::after {
            content: 'üîç Hover to explore';
            position: absolute;
            top: 10px;
            right: 20px;
            background: rgba(52, 152, 219, 0.9);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .diagram-container:hover::after {
            opacity: 1;
        }

        .diagram-placeholder {
            background: white;
            padding: 3rem;
            border-radius: 10px;
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            transition: background 0.3s ease;
        }

        .diagram-placeholder:hover {
            background: #f8f9fa;
        }

        .diagram-svg {
            width: 100%;
            max-width: 800px;
            height: auto;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.1));
            transition: transform 0.3s ease;
        }

        .diagram-svg:hover {
            transform: scale(1.05);
        }

        /* Interactive SVG elements */
        .diagram-svg rect,
        .diagram-svg circle,
        .diagram-svg ellipse {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .diagram-svg rect:hover,
        .diagram-svg circle:hover,
        .diagram-svg ellipse:hover {
            filter: brightness(1.2);
            stroke-width: 3;
        }

        .diagram-svg text {
            pointer-events: none;
        }

        .explanation-section {
            margin-top: 2rem;
        }

        .explanation-section h3 {
            color: var(--primary);
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .explanation-section p {
            line-height: 1.8;
            color: var(--text);
            text-align: justify;
            font-size: 1.05rem;
            margin-bottom: 1rem;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .info-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 15px;
            box-shadow: 0 5px 15px var(--shadow);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .info-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .info-box:hover::before {
            left: 100%;
        }

        .info-box:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .info-box h4 {
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .info-box p {
            font-size: 0.95rem;
            opacity: 0.9;
        }

        .info-box::after {
            content: '‚Üí';
            position: absolute;
            bottom: 10px;
            right: 15px;
            font-size: 1.5rem;
            opacity: 0;
            transition: all 0.3s ease;
        }

        .info-box:hover::after {
            opacity: 1;
            right: 10px;
        }

        /* Simulation Controls */
        .simulation-controls {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            padding: 1.5rem;
            border-radius: 15px;
            margin: 2rem 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .simulation-controls h4 {
            color: white;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .control-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .control-group {
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .control-group label {
            color: white;
            display: block;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .slider-container {
            position: relative;
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.2);
            outline: none;
            -webkit-appearance: none;
            cursor: pointer;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            cursor: pointer;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
            transition: transform 0.2s ease;
        }

        .slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            cursor: pointer;
            border: none;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
        }

        .slider-value {
            color: #667eea;
            font-weight: bold;
            font-size: 1.1rem;
            margin-top: 0.5rem;
            text-align: center;
        }

        .simulation-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .sim-button {
            flex: 1;
            min-width: 120px;
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .sim-button.start {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
        }

        .sim-button.stop {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }

        .sim-button.reset {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
        }

        .sim-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .sim-button:active {
            transform: translateY(-1px);
        }

        /* Energy Flow Animation */
        .energy-flow {
            position: absolute;
            width: 10px;
            height: 10px;
            background: radial-gradient(circle, #f39c12, #e67e22);
            border-radius: 50%;
            box-shadow: 0 0 20px #f39c12;
            animation: flow 3s linear infinite;
            opacity: 0;
        }

        @keyframes flow {
            0% {
                opacity: 0;
                transform: scale(0);
            }
            10% {
                opacity: 1;
                transform: scale(1);
            }
            90% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: scale(0);
            }
        }

        /* Metrics Display */
        .metrics-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .metric-card {
            background: linear-gradient(135deg, rgba(52, 152, 219, 0.2), rgba(52, 152, 219, 0.1));
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(52, 152, 219, 0.3);
            transition: all 0.3s ease;
        }

        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(52, 152, 219, 0.3);
        }

        .metric-label {
            font-size: 0.85rem;
            color: #7f8c8d;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
        }

        .metric-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary);
            font-family: 'Courier New', monospace;
        }

        .metric-unit {
            font-size: 0.9rem;
            color: #95a5a6;
            margin-left: 0.3rem;
        }

        /* Animated Progress Bars */
        .progress-bar-container {
            background: rgba(0, 0, 0, 0.1);
            height: 25px;
            border-radius: 12px;
            overflow: hidden;
            margin: 0.5rem 0;
            position: relative;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #27ae60, #2ecc71);
            border-radius: 12px;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.8rem;
            box-shadow: 0 0 10px rgba(39, 174, 96, 0.5);
        }

        .progress-bar-fill.warning {
            background: linear-gradient(90deg, #f39c12, #e67e22);
            box-shadow: 0 0 10px rgba(243, 156, 18, 0.5);
        }

        .progress-bar-fill.danger {
            background: linear-gradient(90deg, #e74c3c, #c0392b);
            box-shadow: 0 0 10px rgba(231, 76, 60, 0.5);
        }

        /* Interactive 3D Graph */
        .graph-container {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            position: relative;
            min-height: 300px;
        }

        .graph-canvas {
            width: 100%;
            height: 300px;
            border: 1px solid #ecf0f1;
            border-radius: 10px;
        }

        /* Status Indicators */
        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            animation: pulse-status 2s ease-in-out infinite;
        }

        .status-indicator.active {
            background: rgba(39, 174, 96, 0.2);
            color: #27ae60;
            border: 2px solid #27ae60;
        }

        .status-indicator.inactive {
            background: rgba(149, 165, 166, 0.2);
            color: #7f8c8d;
            border: 2px solid #95a5a6;
        }

        .status-indicator.warning {
            background: rgba(243, 156, 18, 0.2);
            color: #f39c12;
            border: 2px solid #f39c12;
        }

        @keyframes pulse-status {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.7;
            }
        }

        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            animation: blink 1.5s ease-in-out infinite;
        }

        .status-indicator.active .status-dot {
            background: #27ae60;
            box-shadow: 0 0 10px #27ae60;
        }

        .status-indicator.inactive .status-dot {
            background: #95a5a6;
        }

        .status-indicator.warning .status-dot {
            background: #f39c12;
            box-shadow: 0 0 10px #f39c12;
        }

        @keyframes blink {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.3;
            }
        }

        /* Toggle Switch */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.4s;
            border-radius: 30px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: 0.4s;
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        input:checked + .toggle-slider {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(30px);
        }

        /* Weather Simulation */
        .weather-widget {
            background: linear-gradient(135deg, #56CCF2, #2F80ED);
            padding: 1.5rem;
            border-radius: 15px;
            color: white;
            margin: 1rem 0;
            box-shadow: 0 10px 30px rgba(47, 128, 237, 0.3);
        }

        .weather-icon {
            font-size: 3rem;
            text-align: center;
            animation: float-icon 3s ease-in-out infinite;
        }

        @keyframes float-icon {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        /* Real-time Chart */
        .chart-line {
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            animation: draw-line 2s ease-in-out forwards;
        }

        @keyframes draw-line {
            to {
                stroke-dashoffset: 0;
            }
        }
        .menu-toggle {
            display: none;
            position: fixed;
            top: 1rem;
            left: 1rem;
            z-index: 1000;
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.8rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.5rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .menu-toggle:hover {
            transform: scale(1.1) rotate(90deg);
            background: var(--secondary);
        }

        .menu-toggle:active {
            transform: scale(0.95);
        }

        /* Scroll Progress Indicator */
        .scroll-progress {
            position: fixed;
            top: 0;
            left: 280px;
            right: 0;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            z-index: 999;
        }

        .scroll-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.1s ease;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.5);
        }

        /* Floating Action Button - Scroll to Top */
        .scroll-top {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .scroll-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .scroll-top:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
        }

        .scroll-top:active {
            transform: translateY(-3px) scale(1.05);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                z-index: 999;
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                padding: 1.5rem;
            }

            .menu-toggle {
                display: block;
            }

            .hero-section h1 {
                font-size: 1.8rem;
            }

            .activity-header h2 {
                font-size: 1.5rem;
            }

            .scroll-progress {
                left: 0;
            }

            .scroll-top {
                bottom: 1rem;
                right: 1rem;
                width: 45px;
                height: 45px;
            }
        }

        /* Scroll animations */
        .fade-in-up {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        .fade-in-up.visible {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <!-- Animated Background Particles -->
    <div class="particles" id="particles"></div>

    <!-- Scroll Progress Bar -->
    <div class="scroll-progress">
        <div class="scroll-progress-bar" id="progressBar"></div>
    </div>

    <!-- Scroll to Top Button -->
    <button class="scroll-top" id="scrollTop">‚Üë</button>

    <button class="menu-toggle" id="menuToggle">‚ò∞</button>

    <!-- Sidebar Navigation -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h1>FT-IV Portfolio</h1>
            <p>Renewable Energy Systems</p>
        </div>
        <ul class="nav-menu">
            <li class="nav-item">
                <a class="nav-link active" data-section="home">
                    <span class="nav-icon">üè†</span>
                    <span>Home</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-section="activity1">
                    <span class="nav-icon">üí®</span>
                    <span>Activity 1: Hybrid System</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-section="activity2">
                    <span class="nav-icon">üåæ</span>
                    <span>Activity 2: Biogas System</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-section="activity3">
                    <span class="nav-icon">üåä</span>
                    <span>Activity 3: OTEC System</span>
                </a>
            </li>
        </ul>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Home Section -->
        <section class="content-section active" id="home">
            <div class="hero-section fade-in-up">
                <h1>FT-IV: Renewable Energy Systems Portfolio</h1>
                <p>Exploring innovative renewable energy solutions for sustainable development. This portfolio showcases three comprehensive design projects focusing on hybrid systems, biomass conversion, and ocean thermal energy.</p>
            </div>
            
            <div class="info-grid">
                <div class="info-box fade-in-up">
                    <h4>Activity 1</h4>
                    <p>Hybrid Biogas-Wind Energy System for Rural Health Clinic</p>
                </div>
                <div class="info-box fade-in-up">
                    <h4>Activity 2</h4>
                    <p>Biomass-Based Biogas Generation for Dairy Farm (100 Cattle)</p>
                </div>
                <div class="info-box fade-in-up">
                    <h4>Activity 3</h4>
                    <p>Ocean Thermal Energy Conversion System with Freshwater Generation</p>
                </div>
            </div>
        </section>

        <!-- Activity 1: Hybrid System -->
        <section class="content-section" id="activity1">
            <div class="activity-card">
                <div class="activity-header">
                    <h2>Activity 1: Hybrid Renewable Energy System</h2>
                    <span class="badge">Biogas + Wind Energy</span>
                </div>

                <div class="diagram-container">
                    <h3 style="margin-bottom: 1.5rem; color: var(--primary);">System Architecture</h3>
                    <div class="diagram-placeholder">
                        <svg class="diagram-svg" viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                            <!-- Wind Turbine -->
                            <g id="wind-turbine">
                                <rect x="50" y="80" width="120" height="80" fill="#3498db" stroke="#2c3e50" stroke-width="2" rx="5"/>
                                <text x="110" y="125" text-anchor="middle" fill="white" font-size="14" font-weight="bold">Wind Turbine</text>
                                <circle cx="110" cy="50" r="25" fill="none" stroke="#3498db" stroke-width="3"/>
                                <line x1="110" y1="25" x2="110" y2="75" stroke="#3498db" stroke-width="3"/>
                                <line x1="85" y1="50" x2="135" y2="50" stroke="#3498db" stroke-width="3"/>
                            </g>

                            <!-- Biogas Generator -->
                            <g id="biogas">
                                <rect x="50" y="200" width="120" height="80" fill="#27ae60" stroke="#2c3e50" stroke-width="2" rx="5"/>
                                <text x="110" y="235" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Biogas</text>
                                <text x="110" y="255" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Generator</text>
                            </g>

                            <!-- Rectifier/Converter -->
                            <g id="converter">
                                <rect x="250" y="130" width="100" height="100" fill="#e74c3c" stroke="#2c3e50" stroke-width="2" rx="5"/>
                                <text x="300" y="170" text-anchor="middle" fill="white" font-size="12" font-weight="bold">AC/DC</text>
                                <text x="300" y="190" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Converter</text>
                            </g>

                            <!-- Battery Storage -->
                            <g id="battery">
                                <rect x="430" y="130" width="100" height="100" fill="#f39c12" stroke="#2c3e50" stroke-width="2" rx="5"/>
                                <text x="480" y="170" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Battery</text>
                                <text x="480" y="190" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Storage</text>
                                <rect x="460" y="145" width="15" height="30" fill="white" opacity="0.3"/>
                                <rect x="495" y="145" width="15" height="30" fill="white" opacity="0.3"/>
                            </g>

                            <!-- Inverter -->
                            <g id="inverter">
                                <rect x="600" y="130" width="100" height="100" fill="#9b59b6" stroke="#2c3e50" stroke-width="2" rx="5"/>
                                <text x="650" y="170" text-anchor="middle" fill="white" font-size="12" font-weight="bold">DC/AC</text>
                                <text x="650" y="190" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Inverter</text>
                            </g>

                            <!-- Health Clinic Load -->
                            <g id="load">
                                <rect x="575" y="300" width="150" height="120" fill="#34495e" stroke="#2c3e50" stroke-width="2" rx="5"/>
                                <text x="650" y="335" text-anchor="middle" fill="white" font-size="14" font-weight="bold">Rural Health</text>
                                <text x="650" y="355" text-anchor="middle" fill="white" font-size="14" font-weight="bold">Clinic</text>
                                <text x="650" y="385" text-anchor="middle" fill="white" font-size="11">‚Ä¢ Lighting</text>
                                <text x="650" y="400" text-anchor="middle" fill="white" font-size="11">‚Ä¢ Medical Equipment</text>
                            </g>

                            <!-- Connections -->
                            <line x1="170" y1="120" x2="250" y2="160" stroke="#2c3e50" stroke-width="3" marker-end="url(#arrowhead)"/>
                            <line x1="170" y1="240" x2="250" y2="200" stroke="#2c3e50" stroke-width="3" marker-end="url(#arrowhead)"/>
                            <line x1="350" y1="180" x2="430" y2="180" stroke="#2c3e50" stroke-width="3" marker-end="url(#arrowhead)"/>
                            <line x1="530" y1="180" x2="600" y2="180" stroke="#2c3e50" stroke-width="3" marker-end="url(#arrowhead)"/>
                            <line x1="650" y1="230" x2="650" y2="300" stroke="#2c3e50" stroke-width="3" marker-end="url(#arrowhead)"/>

                            <!-- Arrow marker definition -->
                            <defs>
                                <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <polygon points="0 0, 10 3, 0 6" fill="#2c3e50"/>
                                </marker>
                            </defs>

                            <!-- Labels -->
                            <text x="210" y="145" font-size="10" fill="#2c3e50">AC Power</text>
                            <text x="210" y="215" font-size="10" fill="#2c3e50">AC Power</text>
                            <text x="390" y="170" font-size="10" fill="#2c3e50">DC</text>
                            <text x="565" y="170" font-size="10" fill="#2c3e50">DC</text>
                            <text x="655" y="270" font-size="10" fill="#2c3e50">AC Load</text>
                        </svg>
                    </div>
                </div>

                <div class="explanation-section">
                    <h3>System Overview</h3>
                    <p>
                        The hybrid renewable energy system integrates wind turbines and biogas generators to ensure reliable power supply for a rural health clinic. Wind energy harnesses kinetic energy from air movement through turbine blades connected to generators, producing alternating current electricity. The biogas component utilizes organic waste decomposition in anaerobic digesters to produce methane-rich gas, which fuels internal combustion engines coupled with electrical generators. Both sources feed into an AC/DC converter that rectifies the power for battery storage, ensuring energy availability during low wind periods or biogas production fluctuations.
                    </p>
                    <p>
                        The battery bank stores excess energy and provides power stability, while a DC/AC inverter converts stored energy back to alternating current suitable for medical equipment, lighting, refrigeration, and diagnostic devices. This hybrid configuration ensures uninterrupted power delivery critical for healthcare services, particularly during emergencies. The system's dual-source design maximizes renewable energy utilization while minimizing dependency on diesel generators, reducing operational costs and carbon emissions. Real-world applications demonstrate 85-90% renewable energy penetration, with biogas providing baseload power and wind contributing during favorable weather conditions, making it ideal for remote healthcare facilities.
                    </p>

                    <!-- Interactive Simulation Controls -->
                    <div class="simulation-controls">
                        <h4>‚ö° Interactive Energy System Simulator</h4>
                        <div class="status-indicator active" id="systemStatus1">
                            <span class="status-dot"></span>
                            <span>System Active</span>
                        </div>

                        <div class="control-panel">
                            <div class="control-group">
                                <label for="windSpeed1">Wind Speed (m/s)</label>
                                <input type="range" class="slider" id="windSpeed1" min="0" max="25" value="12" step="0.5">
                                <div class="slider-value" id="windSpeedValue1">12 m/s</div>
                            </div>

                            <div class="control-group">
                                <label for="biogasFlow1">Biogas Flow (m¬≥/hr)</label>
                                <input type="range" class="slider" id="biogasFlow1" min="0" max="50" value="25" step="1">
                                <div class="slider-value" id="biogasFlowValue1">25 m¬≥/hr</div>
                            </div>

                            <div class="control-group">
                                <label for="clinicLoad1">Clinic Load (kW)</label>
                                <input type="range" class="slider" id="clinicLoad1" min="5" max="30" value="15" step="1">
                                <div class="slider-value" id="clinicLoadValue1">15 kW</div>
                            </div>
                        </div>

                        <div class="simulation-buttons">
                            <button class="sim-button start" onclick="startSimulation(1)">‚ñ∂ Start Simulation</button>
                            <button class="sim-button stop" onclick="stopSimulation(1)">‚è∏ Pause</button>
                            <button class="sim-button reset" onclick="resetSimulation(1)">‚Üª Reset</button>
                        </div>

                        <div class="metrics-display">
                            <div class="metric-card">
                                <div class="metric-label">Wind Power</div>
                                <div class="metric-value" id="windPower1">8.5<span class="metric-unit">kW</span></div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-label">Biogas Power</div>
                                <div class="metric-value" id="biogasPower1">12.0<span class="metric-unit">kW</span></div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-label">Battery SOC</div>
                                <div class="metric-value" id="batterySOC1">85<span class="metric-unit">%</span></div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-label">Total Output</div>
                                <div class="metric-value" id="totalOutput1">20.5<span class="metric-unit">kW</span></div>
                            </div>
                        </div>

                        <div style="margin-top: 1.5rem;">
                            <label style="color: white; margin-bottom: 0.5rem; display: block;">Energy Distribution</label>
                            <div class="progress-bar-container">
                                <div class="progress-bar-fill" id="energyProgress1" style="width: 85%">85% Efficient</div>
                            </div>
                        </div>
                    </div>

                    <!-- Real-time Graph -->
                    <div class="graph-container">
                        <h4 style="margin-bottom: 1rem; color: var(--primary);">üìä Real-Time Power Generation</h4>
                        <canvas id="powerChart1" class="graph-canvas"></canvas>
                    </div>

                    <div class="info-grid" style="margin-top: 2rem;">
                        <div class="info-box">
                            <h4>Energy Source</h4>
                            <p>Wind kinetic energy + Biogas from organic waste</p>
                        </div>
                        <div class="info-box">
                            <h4>Conversion Process</h4>
                            <p>Mechanical ‚Üí Electrical ‚Üí Storage ‚Üí AC Power</p>
                        </div>
                        <div class="info-box">
                            <h4>Power Output</h4>
                            <p>10-25 kW continuous supply</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Activity 2: Biogas System -->
        <section class="content-section" id="activity2">
            <div class="activity-card">
                <div class="activity-header">
                    <h2>Activity 2: Biomass-Based Biogas Generation System</h2>
                    <span class="badge">Dairy Farm - 100 Cattle</span>
                </div>

                <div class="diagram-container">
                    <h3 style="margin-bottom: 1.5rem; color: var(--primary);">System Block Diagram</h3>
                    <div class="diagram-placeholder">
                        <svg class="diagram-svg" viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
                            <!-- Cattle Waste Collection -->
                            <g id="collection">
                                <rect x="50" y="50" width="140" height="80" fill="#8b4513" stroke="#2c3e50" stroke-width="2" rx="5"/>
                                <text x="120" y="85" text-anchor="middle" fill="white" font-size="13" font-weight="bold">Cattle Waste</text>
                                <text x="120" y="105" text-anchor="middle" fill="white" font-size="13" font-weight="bold">Collection</text>
                                <text x="120" y="120" text-anchor="middle" fill="white" font-size="10">(100 Cattle)</text>
                            </g>

                            <!-- Mixing Tank -->
                            <g id="mixing">
                                <rect x="250" y="50" width="130" height="80" fill="#3498db" stroke="#2c3e50" stroke-width="2" rx="5"/>
                                <text x="315" y="85" text-anchor="middle" fill="white" font-size="13" font-weight="bold">Mixing Tank</text>
                                <text x="315" y="105" text-anchor="middle" fill="white" font-size="11">(Water + Waste)</text>
                            </g>

                            <!-- Anaerobic Digester -->
                            <g id="digester">
                                <ellipse cx="315" cy="240" rx="110" ry="130" fill="#27ae60" stroke="#2c3e50" stroke-width="3"/>
                                <text x="315" y="220" text-anchor="middle" fill="white" font-size="14" font-weight="bold">Anaerobic</text>
                                <text x="315" y="240" text-anchor="middle" fill="white" font-size="14" font-weight="bold">Digester</text>
                                <text x="315" y="265" text-anchor="middle" fill="white" font-size="11">(35-40¬∞C)</text>
                                <text x="315" y="285" text-anchor="middle" fill="white" font-size="11">30-40 days HRT</text>
                            </g>

                            <!-- Gas Storage -->
                            <g id="storage">
                                <ellipse cx="550" cy="90" rx="90" ry="70" fill="#f39c12" stroke="#2c3e50" stroke-width="2"/>
                                <text x="550" y="85" text-anchor="middle" fill="white" font-size="13" font-weight="bold">Biogas</text>
                                <text x="550" y="105" text-anchor="middle" fill="white" font-size="13" font-weight="bold">Storage</text>
                            </g>

                            <!-- Gas Purification -->
                            <g id="purification">
                                <rect x="680" y="50" width="100" height="80" fill="#9b59b6" stroke="#2c3e50" stroke-width="2" rx="5"/>
                                <text x="730" y="80" text-anchor="middle" fill="white" font-size="12" font-weight="bold">H2S</text>
                                <text x="730" y="100" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Removal</text>
                            </g>

                            <!-- Applications -->
                            <g id="cooking">
                                <rect x="680" y="200" width="100" height="60" fill="#e74c3c" stroke="#2c3e50" stroke-width="2" rx="5"/>
                                <text x="730" y="225" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Cooking</text>
                                <text x="730" y="245" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Gas</text>
                            </g>

                            <g id="electricity">
                                <rect x="680" y="280" width="100" height="60" fill="#16a085" stroke="#2c3e50" stroke-width="2" rx="5"/>
                                <text x="730" y="305" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Electricity</text>
                                <text x="730" y="325" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Generation</text>
                            </g>

                            <!-- Slurry Output -->
                            <g id="slurry">
                                <rect x="250" y="420" width="130" height="80" fill="#795548" stroke="#2c3e50" stroke-width="2" rx="5"/>
                                <text x="315" y="450" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Digestate</text>
                                <text x="315" y="470" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Slurry</text>
                                <text x="315" y="490" text-anchor="middle" fill="white" font-size="10">(Bio-fertilizer)</text>
                            </g>

                            <!-- Connections -->
                            <line x1="190" y1="90" x2="250" y2="90" stroke="#2c3e50" stroke-width="3" marker-end="url(#arrowhead2)"/>
                            <line x1="315" y1="130" x2="315" y2="110" stroke="#2c3e50" stroke-width="3" marker-end="url(#arrowhead2)"/>
                            <line x1="405" y1="200" x2="460" y2="110" stroke="#2c3e50" stroke-width="3" marker-end="url(#arrowhead2)"/>
                            <line x1="640" y1="90" x2="680" y2="90" stroke="#2c3e50" stroke-width="3" marker-end="url(#arrowhead2)"/>
                            <line x1="730" y1="130" x2="730" y2="200" stroke="#2c3e50" stroke-width="3" marker-end="url(#arrowhead2)"/>
                            <line x1="730" y1="260" x2="730" y2="280" stroke="#2c3e50" stroke-width="3" marker-end="url(#arrowhead2)"/>
                            <line x1="315" y1="370" x2="315" y2="420" stroke="#2c3e50" stroke-width="3" marker-end="url(#arrowhead2)"/>

                            <!-- Arrow marker -->
                            <defs>
                                <marker id="arrowhead2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <polygon points="0 0, 10 3, 0 6" fill="#2c3e50"/>
                                </marker>
                            </defs>

                            <!-- Labels -->
                            <text x="220" y="80" font-size="10" fill="#2c3e50">1500 kg/day</text>
                            <text x="330" y="155" font-size="10" fill="#2c3e50">Slurry (1:1)</text>
                            <text x="430" y="150" font-size="10" fill="#2c3e50">60% CH‚ÇÑ</text>
                            <text x="650" y="80" font-size="10" fill="#2c3e50">Raw Gas</text>
                            <text x="735" y="175" font-size="10" fill="#2c3e50">Clean Gas</text>
                            <text x="330" y="395" font-size="10" fill="#2c3e50">Nutrient-rich</text>
                        </svg>
                    </div>
                </div>

                <div class="explanation-section">
                    <h3>System Overview</h3>
                    <p>
                        The biomass-based biogas generation system converts organic waste from 100 cattle into valuable renewable energy. Daily cattle manure collection yields approximately 1500 kg of waste, which enters a mixing tank where it combines with water in a 1:1 ratio to create optimal slurry consistency. This prepared feedstock flows into an anaerobic digester, a sealed chamber maintained at mesophilic temperatures between 35-40¬∞C, where methanogenic bacteria break down organic matter in the absence of oxygen. The anaerobic digestion process occurs in four stages: hydrolysis, acidogenesis, acetogenesis, and methanogenesis, producing biogas with 55-65% methane content, 30-40% carbon dioxide, and trace amounts of hydrogen sulfide.
                    </p>
                    <p>
                        The generated biogas collects in floating dome storage systems, maintaining consistent pressure for end-use applications. Before utilization, the gas passes through hydrogen sulfide scrubbers containing iron oxide or activated carbon to prevent equipment corrosion. Purified biogas serves multiple purposes including cooking fuel for farm operations, electricity generation through modified diesel generators or gas engines, and water heating systems. The remaining digestate slurry, rich in nitrogen, phosphorus, and potassium, serves as superior organic fertilizer for agricultural fields, closing the nutrient loop. This integrated system converts 100 cattle waste into approximately 150-200 cubic meters of biogas daily, reducing greenhouse gas emissions while providing energy independence and sustainable waste management for dairy operations.
                    </p>

                    <!-- Interactive Biogas Production Simulator -->
                    <div class="simulation-controls">
                        <h4>üêÑ Interactive Biogas Production Simulator</h4>
                        <div class="status-indicator active" id="systemStatus2">
                            <span class="status-dot"></span>
                            <span>Digester Active</span>
                        </div>

                        <div class="control-panel">
                            <div class="control-group">
                                <label for="cattleCount">Number of Cattle</label>
                                <input type="range" class="slider" id="cattleCount" min="50" max="200" value="100" step="10">
                                <div class="slider-value" id="cattleCountValue">100 Cattle</div>
                            </div>

                            <div class="control-group">
                                <label for="temperature2">Digester Temp (¬∞C)</label>
                                <input type="range" class="slider" id="temperature2" min="20" max="50" value="37" step="1">
                                <div class="slider-value" id="temperature2Value">37 ¬∞C</div>
                            </div>

                            <div class="control-group">
                                <label for="retention">Retention Time (days)</label>
                                <input type="range" class="slider" id="retention" min="20" max="50" value="35" step="1">
                                <div class="slider-value" id="retentionValue">35 days</div>
                            </div>
                        </div>

                        <div class="weather-widget">
                            <div class="weather-icon" id="weatherIcon2">‚òÄÔ∏è</div>
                            <div style="text-align: center; margin-top: 1rem;">
                                <div style="font-size: 1.2rem; font-weight: bold;">Ambient Temperature</div>
                                <div style="font-size: 2rem;" id="ambientTemp2">28¬∞C</div>
                            </div>
                        </div>

                        <div class="simulation-buttons">
                            <button class="sim-button start" onclick="startSimulation(2)">‚ñ∂ Start Production</button>
                            <button class="sim-button stop" onclick="stopSimulation(2)">‚è∏ Pause</button>
                            <button class="sim-button reset" onclick="resetSimulation(2)">‚Üª Reset</button>
                        </div>

                        <div class="metrics-display">
                            <div class="metric-card">
                                <div class="metric-label">Waste Input</div>
                                <div class="metric-value" id="wasteInput2">1500<span class="metric-unit">kg/day</span></div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-label">Biogas Output</div>
                                <div class="metric-value" id="biogasOutput2">180<span class="metric-unit">m¬≥/day</span></div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-label">Methane Content</div>
                                <div class="metric-value" id="methaneContent2">62<span class="metric-unit">%</span></div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-label">Fertilizer Output</div>
                                <div class="metric-value" id="fertilizerOutput2">1350<span class="metric-unit">kg/day</span></div>
                            </div>
                        </div>

                        <div style="margin-top: 1.5rem;">
                            <label style="color: white; margin-bottom: 0.5rem; display: block;">Digestion Efficiency</label>
                            <div class="progress-bar-container">
                                <div class="progress-bar-fill" id="digestionProgress2" style="width: 78%">78% Efficiency</div>
                            </div>
                        </div>

                        <div style="margin-top: 1rem;">
                            <label style="color: white; margin-bottom: 0.5rem; display: block;">Storage Capacity</label>
                            <div class="progress-bar-container">
                                <div class="progress-bar-fill warning" id="storageProgress2" style="width: 65%">65% Full</div>
                            </div>
                        </div>
                    </div>

                    <!-- Real-time Production Chart -->
                    <div class="graph-container">
                        <h4 style="margin-bottom: 1rem; color: var(--primary);">üìä Daily Biogas Production Trend</h4>
                        <canvas id="biogasChart2" class="graph-canvas"></canvas>
                    </div>

                    <div class="info-grid" style="margin-top: 2rem;">
                        <div class="info-box">
                            <h4>Energy Source</h4>
                            <p>Cattle manure biomass (1500 kg/day)</p>
                        </div>
                        <div class="info-box">
                            <h4>Conversion Process</h4>
                            <p>Anaerobic digestion ‚Üí Methane production</p>
                        </div>
                        <div class="info-box">
                            <h4>Gas Output</h4>
                            <p>150-200 m¬≥/day biogas (60% CH‚ÇÑ)</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Activity 3: OTEC System -->
        <section class="content-section" id="activity3">
            <div class="activity-card">
                <div class="activity-header">
                    <h2>Activity 3: Ocean Thermal Energy Conversion (OTEC) System</h2>
                    <span class="badge">Electricity + Freshwater Generation</span>
                </div>

                <div class="diagram-container">
                    <h3 style="margin-bottom: 1.5rem; color: var(--primary);">OTEC System Architecture</h3>
                    <div class="diagram-placeholder">
                        <svg class="diagram-svg" viewBox="0 0 850 600" xmlns="http://www.w3.org/2000/svg">
                            <!-- Warm Surface Water Intake -->
                            <g id="warm-intake">
                                <rect x="50" y="80" width="130" height="70" fill="#e74c3c" stroke="#2c3e50" stroke-width="2" rx="5"/>
                                <text x="115" y="110" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Warm Surface</text>
                                <text x="115" y="130" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Water Intake</text>
                                <text x="115" y="145" text-anchor="middle" fill="white" font-size="10">(25-29¬∞C)</text>
                            </g>

                            <!-- Evaporator -->
                            <g id="evaporator">
                                <rect x="240" y="70" width="130" height="90" fill="#f39c12" stroke="#2c3e50" stroke-width="2" rx="5"/>
                                <text x="305" y="105" text-anchor="middle" fill="white" font-size="13" font-weight="bold">Evaporator</text>
                                <text x="305" y="125" text-anchor="middle" fill="white" font-size="11">(Heat Exchanger)</text>
                                <text x="305" y="145" text-anchor="middle" fill="white" font-size="10">Working Fluid</text>
                            </g>

                            <!-- Turbine Generator -->
                            <g id="turbine">
                                <circle cx="475" cy="115" r="50" fill="#3498db" stroke="#2c3e50" stroke-width="3"/>
                                <text x="475" y="110" text-anchor="middle" fill="white" font-size="13" font-weight="bold">Turbine</text>
                                <text x="475" y="128" text-anchor="middle" fill="white" font-size="11">Generator</text>
                                
                                <rect x="560" y="90" width="90" height="50" fill="#27ae60" stroke="#2c3e50" stroke-width="2" rx="5"/>
                                <text x="605" y="115" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Electricity</text>
                                <text x="605" y="130" text-anchor="middle" fill="white" font-size="10">Output</text>
                            </g>

                            <!-- Condenser -->
                            <g id="condenser">
                                <rect x="240" y="230" width="130" height="90" fill="#9b59b6" stroke="#2c3e50" stroke-width="2" rx="5"/>
                                <text x="305" y="265" text-anchor="middle" fill="white" font-size="13" font-weight="bold">Condenser</text>
                                <text x="305" y="285" text-anchor="middle" fill="white" font-size="11">(Heat Exchanger)</text>
                                <text x="305" y="305" text-anchor="middle" fill="white" font-size="10">Cooling System</text>
                            </g>

                            <!-- Cold Deep Water Intake -->
                            <g id="cold-intake">
                                <rect x="50" y="240" width="130" height="70" fill="#3498db" stroke="#2c3e50" stroke-width="2" rx="5"/>
                                <text x="115" y="265" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Deep Cold</text>
                                <text x="115" y="285" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Water Intake</text>
                                <text x="115" y="300" text-anchor="middle" fill="white" font-size="10">(4-7¬∞C, 1000m)</text>
                            </g>

                            <!-- Working Fluid Pump -->
                            <g id="pump">
                                <rect x="415" y="250" width="60" height="50" fill="#34495e" stroke="#2c3e50" stroke-width="2" rx="5"/>
                                <text x="445" y="273" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Feed</text>
                                <text x="445" y="288" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Pump</text>
                            </g>

                            <!-- Desalination Unit -->
                            <g id="desalination">
                                <rect x="560" y="220" width="120" height="80" fill="#16a085" stroke="#2c3e50" stroke-width="2" rx="5"/>
                                <text x="620" y="250" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Flash</text>
                                <text x="620" y="268" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Desalination</text>
                                <text x="620" y="288" text-anchor="middle" fill="white" font-size="10">Freshwater</text>
                            </g>

                            <!-- Warm Water Discharge -->
                            <g id="warm-discharge">
                                <rect x="440" y="390" width="110" height="60" fill="#e67e22" stroke="#2c3e50" stroke-width="2" rx="5"/>
                                <text x="495" y="415" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Warm Water</text>
                                <text x="495" y="432" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Discharge</text>
                            </g>

                            <!-- Cold Water Discharge -->
                            <g id="cold-discharge">
                                <rect x="240" y="390" width="110" height="60" fill="#2980b9" stroke="#2c3e50" stroke-width="2" rx="5"/>
                                <text x="295" y="415" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Cold Water</text>
                                <text x="295" y="432" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Discharge</text>
                            </g>

                            <!-- Connections -->
                            <line x1="180" y1="115" x2="240" y2="115" stroke="#e74c3c" stroke-width="4" marker-end="url(#arrowhead3)"/>
                            <line x1="370" y1="115" x2="425" y2="115" stroke="#f39c12" stroke-width="4" marker-end="url(#arrowhead3)" stroke-dasharray="5,5"/>
                            <line x1="475" y1="165" x2="445" y2="250" stroke="#9b59b6" stroke-width="4" marker-end="url(#arrowhead3)" stroke-dasharray="5,5"/>
                            <line x1="370" y1="275" x2="415" y2="275" stroke="#3498db" stroke-width="4" marker-end="url(#arrowhead3)"/>
                            <line x1="180" y1="275" x2="240" y2="275" stroke="#3498db" stroke-width="4" marker-end="url(#arrowhead3)"/>
                            <line x1="305" y1="320" x2="305" y2="390" stroke="#2980b9" stroke-width="4" marker-end="url(#arrowhead3)"/>
                            <line x1="305" y1="160" x2="305" y2="230" stroke="#3498db" stroke-width="3"/>
                            <line x1="370" y1="115" x2="435" y2="90" stroke="#f39c12" stroke-width="3"/>
                            <line x1="370" y1="275" x2="495" y2="390" stroke="#e67e22" stroke-width="4" marker-end="url(#arrowhead3)"/>
                            <line x1="525" y1="115" x2="560" y2="115" stroke="#27ae60" stroke-width="4" marker-end="url(#arrowhead3)"/>
                            <line x1="370" y1="260" x2="560" y2="260" stroke="#16a085" stroke-width="3" marker-end="url(#arrowhead3)"/>

                            <!-- Closed loop -->
                            <path d="M 415 275 Q 390 200 415 115" stroke="#34495e" stroke-width="3" fill="none" marker-end="url(#arrowhead3)"/>

                            <!-- Arrow marker -->
                            <defs>
                                <marker id="arrowhead3" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <polygon points="0 0, 10 3, 0 6" fill="#2c3e50"/>
                                </marker>
                            </defs>

                            <!-- Labels -->
                            <text x="210" y="105" font-size="9" fill="#2c3e50">25-29¬∞C</text>
                            <text x="395" y="105" font-size="9" fill="#2c3e50">Vapor</text>
                            <text x="400" y="265" font-size="9" fill="#2c3e50">Liquid</text>
                            <text x="210" y="265" font-size="9" fill="#2c3e50">4-7¬∞C</text>
                            <text x="485" y="210" font-size="9" fill="#2c3e50">Condensate</text>
                            <text x="730" y="110" font-size="11" fill="#27ae60" font-weight="bold">‚ö° Power Grid</text>
                            <text x="730" y="255" font-size="11" fill="#16a085" font-weight="bold">üíß Freshwater</text>
                            
                            <!-- Temperature difference label -->
                            <text x="100" y="380" font-size="13" fill="#2c3e50" font-weight="bold">ŒîT ‚âà 20¬∞C Temperature Difference</text>
                        </svg>
                    </div>
                </div>

                <div class="explanation-section">
                    <h3>System Overview</h3>
                    <p>
                        Ocean Thermal Energy Conversion exploits the natural temperature gradient between warm tropical surface waters (25-29¬∞C) and cold deep ocean waters (4-7¬∞C) from depths exceeding 1000 meters. The closed-cycle OTEC system circulates a working fluid with extremely low boiling point, typically ammonia or refrigerant R-134a, through a continuous thermodynamic cycle. Warm surface seawater pumped into the evaporator heat exchanger vaporizes the working fluid at low pressure, creating high-pressure vapor that drives a turbine connected to an electrical generator. The expanding vapor performs mechanical work, rotating turbine blades at optimum speeds to generate three-phase alternating current electricity. After energy extraction, the low-pressure vapor enters the condenser where cold deep seawater absorbs residual heat, condensing the vapor back to liquid state.
                    </p>
                    <p>
                        Feed pumps circulate the condensed working fluid back to the evaporator, completing the thermodynamic cycle. The system generates continuous baseload electricity with capacity factors exceeding 90%, producing 10-100 MW depending on installation scale. Additionally, the warm surface water discharge stream enables flash desalination, where pressure reduction causes partial evaporation of seawater, producing 4000-8000 liters of potable freshwater per megawatt-hour of electricity generated. OTEC installations serve tropical island nations and coastal regions, providing energy independence, freshwater security, and supporting aquaculture operations using nutrient-rich cold deep seawater. The technology demonstrates exceptional sustainability with zero fuel requirements, minimal environmental impact, and reliable operation throughout annual cycles, making it ideal for remote coastal communities requiring both electricity and freshwater resources.
                    </p>

                    <!-- Interactive OTEC Simulator -->
                    <div class="simulation-controls">
                        <h4>üåä Interactive OTEC System Simulator</h4>
                        <div class="status-indicator active" id="systemStatus3">
                            <span class="status-dot"></span>
                            <span>OTEC Operational</span>
                        </div>

                        <div class="control-panel">
                            <div class="control-group">
                                <label for="surfaceTemp">Surface Water Temp (¬∞C)</label>
                                <input type="range" class="slider" id="surfaceTemp" min="22" max="32" value="27" step="0.5">
                                <div class="slider-value" id="surfaceTempValue">27 ¬∞C</div>
                            </div>

                            <div class="control-group">
                                <label for="deepTemp">Deep Water Temp (¬∞C)</label>
                                <input type="range" class="slider" id="deepTemp" min="2" max="10" value="5" step="0.5">
                                <div class="slider-value" id="deepTempValue">5 ¬∞C</div>
                            </div>

                            <div class="control-group">
                                <label for="flowRate">Water Flow Rate (m¬≥/s)</label>
                                <input type="range" class="slider" id="flowRate" min="50" max="500" value="250" step="10">
                                <div class="slider-value" id="flowRateValue">250 m¬≥/s</div>
                            </div>

                            <div class="control-group">
                                <label for="turbineEff">Turbine Efficiency (%)</label>
                                <input type="range" class="slider" id="turbineEff" min="60" max="95" value="80" step="1">
                                <div class="slider-value" id="turbineEffValue">80 %</div>
                            </div>
                        </div>

                        <div class="weather-widget">
                            <div class="weather-icon" id="weatherIcon3">üå°Ô∏è</div>
                            <div style="text-align: center; margin-top: 1rem;">
                                <div style="font-size: 1.2rem; font-weight: bold;">Temperature Gradient (ŒîT)</div>
                                <div style="font-size: 2.5rem; font-weight: bold;" id="tempGradient3">22¬∞C</div>
                            </div>
                        </div>

                        <div class="simulation-buttons">
                            <button class="sim-button start" onclick="startSimulation(3)">‚ñ∂ Start OTEC</button>
                            <button class="sim-button stop" onclick="stopSimulation(3)">‚è∏ Pause</button>
                            <button class="sim-button reset" onclick="resetSimulation(3)">‚Üª Reset</button>
                        </div>

                        <div class="metrics-display">
                            <div class="metric-card">
                                <div class="metric-label">Power Output</div>
                                 <script>
        // Global simulation state
        const simulations = {
            1: { running: false, interval: null, chartData: [] },
            2: { running: false, interval: null, chartData: [] },
            3: { running: false, interval: null, chartData: [] }
        };

        // Chart instances
        let charts = {};

        // Initialize Charts
        function initializeChart(canvasId, label, color) {
            const canvas = document.getElementById(canvasId);
            if (!canvas) return null;
            
            const ctx = canvas.getContext('2d');
            
            return {
                canvas: canvas,
                ctx: ctx,
                data: [],
                maxPoints: 20,
                color: color,
                label: label
            };
        }

        // Draw Chart
        function drawChart(chart) {
            if (!chart || !chart.ctx) return;
            
            const ctx = chart.ctx;
            const canvas = chart.canvas;
            const width = canvas.width = canvas.offsetWidth;
            const height = canvas.height = canvas.offsetHeight;
            
            ctx.clearRect(0, 0, width, height);
            
            if (chart.data.length === 0) return;
            
            // Draw grid
            ctx.strokeStyle = '#ecf0f1';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 5; i++) {
                const y = (height / 5) * i;
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(width, y);
                ctx.stroke();
            }
            
            // Draw line
            ctx.strokeStyle = chart.color;
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            const maxValue = Math.max(...chart.data, 1);
            const xStep = width / (chart.maxPoints - 1);
            
            chart.data.forEach((value, index) => {
                const x = index * xStep;
                const y = height - (value / maxValue) * height * 0.8 - height * 0.1;
                
                if (index === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            });
            
            ctx.stroke();
            
            // Draw points
            ctx.fillStyle = chart.color;
            chart.data.forEach((value, index) => {
                const x = index * xStep;
                const y = height - (value / maxValue) * height * 0.8 - height * 0.1;
                
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, Math.PI * 2);
                ctx.fill();
            });
            
            // Draw labels
            ctx.fillStyle = '#7f8c8d';
            ctx.font = '12px Arial';
            ctx.fillText(chart.label, 10, 20);
            ctx.fillText(`Current: ${chart.data[chart.data.length - 1]?.toFixed(1) || 0}`, 10, 40);
        }

        // Activity 1: Hybrid System Simulation
        function updateActivity1() {
            const windSpeed = parseFloat(document.getElementById('windSpeed1').value);
            const biogasFlow = parseFloat(document.getElementById('biogasFlow1').value);
            const clinicLoad = parseFloat(document.getElementById('clinicLoad1').value);
            
            // Update displayed values
            document.getElementById('windSpeedValue1').textContent = windSpeed + ' m/s';
            document.getElementById('biogasFlowValue1').textContent = biogasFlow + ' m¬≥/hr';
            document.getElementById('clinicLoadValue1').textContent = clinicLoad + ' kW';
            
            // Calculate power output (simplified formulas)
            const windPower = Math.pow(windSpeed, 3) * 0.035; // Wind power curve
            const biogasPower = biogasFlow * 0.48; // Biogas energy content
            const totalOutput = windPower + biogasPower;
            
            // Update metrics
            document.getElementById('windPower1').innerHTML = windPower.toFixed(1) + '<span class="metric-unit">kW</span>';
            document.getElementById('biogasPower1').innerHTML = biogasPower.toFixed(1) + '<span class="metric-unit">kW</span>';
            document.getElementById('totalOutput1').innerHTML = totalOutput.toFixed(1) + '<span class="metric-unit">kW</span>';
            
            // Battery SOC calculation
            const powerBalance = totalOutput - clinicLoad;
            let currentSOC = parseFloat(document.getElementById('batterySOC1').textContent);
            currentSOC = Math.max(0, Math.min(100, currentSOC + powerBalance * 0.5));
            document.getElementById('batterySOC1').innerHTML = currentSOC.toFixed(0) + '<span class="metric-unit">%</span>';
            
            // Update progress bar
            const efficiency = (Math.min(totalOutput, clinicLoad) / clinicLoad) * 100;
            const progressBar = document.getElementById('energyProgress1');
            progressBar.style.width = efficiency + '%';
            progressBar.textContent = efficiency.toFixed(0) + '% Efficient';
            
            if (efficiency < 70) {
                progressBar.className = 'progress-bar-fill danger';
            } else if (efficiency < 90) {
                progressBar.className = 'progress-bar-fill warning';
            } else {
                progressBar.className = 'progress-bar-fill';
            }
            
            // Update chart
            if (charts[1]) {
                charts[1].data.push(totalOutput);
                if (charts[1].data.length > charts[1].maxPoints) {
                    charts[1].data.shift();
                }
                drawChart(charts[1]);
            }
        }

        // Activity 2: Biogas System Simulation
        function updateActivity2() {
            const cattleCount = parseFloat(document.getElementById('cattleCount').value);
            const temperature = parseFloat(document.getElementById('temperature2').value);
            const retention = parseFloat(document.getElementById('retention').value);
            
            // Update displayed values
            document.getElementById('cattleCountValue').textContent = cattleCount + ' Cattle';
            document.getElementById('temperature2Value').textContent = temperature + ' ¬∞C';
            document.getElementById('retentionValue').textContent = retention + ' days';
            
            // Calculate waste and biogas (simplified)
            const wastePerCattle = 15; // kg per cattle per day
            const totalWaste = cattleCount * wastePerCattle;
            
            // Temperature factor (optimal at 37¬∞C)
            const tempFactor = 1 - Math.abs(temperature - 37) * 0.02;
            
            // Retention factor (optimal at 35 days)
            const retentionFactor = Math.min(retention / 35, 1.2);
            
            const biogasYield = totalWaste * 0.12 * tempFactor * retentionFactor; // m¬≥ per day
            const methaneContent = 55 + tempFactor * 10; // percentage
            const fertilizerOutput = totalWaste * 0.9; // 90% becomes fertilizer
            
            // Update metrics
            document.getElementById('wasteInput2').innerHTML = totalWaste.toFixed(0) + '<span class="metric-unit">kg/day</span>';
            document.getElementById('biogasOutput2').innerHTML = biogasYield.toFixed(0) + '<span class="metric-unit">m¬≥/day</span>';
            document.getElementById('methaneContent2').innerHTML = methaneContent.toFixed(0) + '<span class="metric-unit">%</span>';
            document.getElementById('fertilizerOutput2').innerHTML = fertilizerOutput.toFixed(0) + '<span class="metric-unit">kg/day</span>';
            
            // Update ambient temperature
            const ambientTemp = 20 + Math.random() * 15;
            document.getElementById('ambientTemp2').textContent = ambientTemp.toFixed(1) + '¬∞C';
            
            // Update weather icon based on temperature
            const weatherIcon = document.getElementById('weatherIcon2');
            if (ambientTemp > 30) weatherIcon.textContent = '‚òÄÔ∏è';
            else if (ambientTemp > 25) weatherIcon.textContent = '‚õÖ';
            else weatherIcon.textContent = '‚òÅÔ∏è';
            
            // Update progress bars
            const digestionEff = tempFactor * retentionFactor * 100;
            document.getElementById('digestionProgress2').style.width = digestionEff + '%';
            document.getElementById('digestionProgress2').textContent = digestionEff.toFixed(0) + '% Efficiency';
            
            const storageLevel = 50 + Math.random() * 30;
            document.getElementById('storageProgress2').style.width = storageLevel + '%';
            document.getElementById('storageProgress2').textContent = storageLevel.toFixed(0) + '% Full';
            
            // Update chart
            if (charts[2]) {
                charts[2].data.push(biogasYield);
                if (charts[2].data.length > charts[2].maxPoints) {
                    charts[2].data.shift();
                }
                drawChart(charts[2]);
            }
        }

        // Activity 3: OTEC System Simulation
        function updateActivity3() {
            const surfaceTemp = parseFloat(document.getElementById('surfaceTemp').value);
            const deepTemp = parseFloat(document.getElementById('deepTemp').value);
            const flowRate = parseFloat(document.getElementById('flowRate').value);
            const turbineEff = parseFloat(document.getElementById('turbineEff').value);
            
            // Update displayed values
            document.getElementById('surfaceTempValue').textContent = surfaceTemp + ' ¬∞C';
            document.getElementById('deepTempValue').textContent = deepTemp + ' ¬∞C';
            document.getElementById('flowRateValue').textContent = flowRate + ' m¬≥/s';
            document.getElementById('turbineEffValue').textContent = turbineEff + ' %';
            
            // Calculate temperature gradient
            const deltaT = surfaceTemp - deepTemp;
            document.getElementById('tempGradient3').textContent = deltaT.toFixed(1) + '¬∞C';
            
            // Carnot efficiency (theoretical maximum)
            const carnotEff = deltaT / (surfaceTemp + 273.15);
            
            // Actual efficiency (much lower than Carnot)
            const systemEff = carnotEff * 0.6 * (turbineEff / 100);
            
            // Power calculation (simplified)
            const thermalPower = flowRate * 4186 * deltaT / 1000000; // MW
            const electricPower = thermalPower * systemEff;
            
            // Freshwater production (based on power)
            const freshwater = electricPower * 6.5; // kL/hr
            
            // CO2 avoided (compared to coal)
            const co2Avoided = electricPower * 24 * 0.85; // tons/day
            
            // Update metrics
            document.getElementById('powerOutput3').innerHTML = electricPower.toFixed(1) + '<span class="metric-unit">MW</span>';
            document.getElementById('freshwater3').innerHTML = freshwater.toFixed(1) + '<span class="metric-unit">kL/hr</span>';
            document.getElementById('efficiency3').innerHTML = (systemEff * 100).toFixed(1) + '<span class="metric-unit">%</span>';
            document.getElementById('co2Avoided3').innerHTML = co2Avoided.toFixed(0) + '<span class="metric-unit">tons/day</span>';
            
            // Update progress bars
            const evaporatorEff = 75 + Math.random() * 20;
            document.getElementById('evaporatorProgress3').style.width = evaporatorEff + '%';
            document.getElementById('evaporatorProgress3').textContent = evaporatorEff.toFixed(0) + '% Efficiency';
            
            const condenserEff = 80 + Math.random() * 15;
            document.getElementById('condenserProgress3').style.width = condenserEff + '%';
            document.getElementById('condenserProgress3').textContent = condenserEff.toFixed(0) + '% Efficiency';
            
            const turbineLoad = (electricPower / 100) * 100;
            document.getElementById('turbineLoad3').style.width = turbineLoad + '%';
            document.getElementById('turbineLoad3').textContent = turbineLoad.toFixed(0) + '% Load';
            
            // Update chart
            if (charts[3]) {
                charts[3].data.push(electricPower);
                if (charts[3].data.length > charts[3].maxPoints) {
                    charts[3].data.shift();
                }
                drawChart(charts[3]);
            }
        }

        // Simulation Controls
        function startSimulation(activityNum) {
            if (simulations[activityNum].running) return;
            
            simulations[activityNum].running = true;
            document.getElementById('systemStatus' + activityNum).className = 'status-indicator active';
            document.getElementById('systemStatus' + activityNum).innerHTML = '<span class="status-dot"></span><span>System Active</span>';
            
            simulations[activityNum].interval = setInterval(() => {
                switch(activityNum) {
                    case 1: updateActivity1(); break;
                    case 2: updateActivity2(); break;
                    case 3: updateActivity3(); break;
                }
            }, 1000);
        }

        function stopSimulation(activityNum) {
            simulations[activityNum].running = false;
            clearInterval(simulations[activityNum].interval);
            document.getElementById('systemStatus' + activityNum).className = 'status-indicator inactive';
            document.getElementById('systemStatus' + activityNum).innerHTML = '<span class="status-dot"></span><span>System Paused</span>';
        }

        function resetSimulation(activityNum) {
            stopSimulation(activityNum);
            
            if (charts[activityNum]) {
                charts[activityNum].data = [];
                drawChart(charts[activityNum]);
            }
            
            // Reset sliders to default values
            switch(activityNum) {
                case 1:
                    document.getElementById('windSpeed1').value = 12;
                    document.getElementById('biogasFlow1').value = 25;
                    document.getElementById('clinicLoad1').value = 15;
                    updateActivity1();
                    break;
                case 2:
                    document.getElementById('cattleCount').value = 100;
                    document.getElementById('temperature2').value = 37;
                    document.getElementById('retention').value = 35;
                    updateActivity2();
                    break;
                case 3:
                    document.getElementById('surfaceTemp').value = 27;
                    document.getElementById('deepTemp').value = 5;
                    document.getElementById('flowRate').value = 250;
                    document.getElementById('turbineEff').value = 80;
                    updateActivity3();
                    break;
            }
        }

        // Toggle Functions
        function toggleDesalination() {
            const toggle = document.getElementById('desalToggle');
            const freshwaterElement = document.getElementById('freshwater3');
            if (toggle.checked) {
                freshwaterElement.style.opacity = '1';
            } else {
                freshwaterElement.style.opacity = '0.3';
            }
        }

        function togglePumps() {
            const toggle = document.getElementById('pumpToggle');
            if (!toggle.checked) {
                stopSimulation(3);
            }
        }

        function toggleNightMode() {
            const toggle = document.getElementById('nightMode');
            document.body.style.filter = toggle.checked ? 'invert(1) hue-rotate(180deg)' : 'none';
        }

        // Setup slider event listeners
        function setupSliderListeners() {
            // Activity 1
            if (document.getElementById('windSpeed1')) {
                document.getElementById('windSpeed1').addEventListener('input', updateActivity1);
                document.getElementById('biogasFlow1').addEventListener('input', updateActivity1);
                document.getElementById('clinicLoad1').addEventListener('input', updateActivity1);
            }
            
            // Activity 2
            if (document.getElementById('cattleCount')) {
                document.getElementById('cattleCount').addEventListener('input', updateActivity2);
                document.getElementById('temperature2').addEventListener('input', updateActivity2);
                document.getElementById('retention').addEventListener('input', updateActivity2);
            }
            
            // Activity 3
            if (document.getElementById('surfaceTemp')) {
                document.getElementById('surfaceTemp').addEventListener('input', updateActivity3);
                document.getElementById('deepTemp').addEventListener('input', updateActivity3);
                document.getElementById('flowRate').addEventListener('input', updateActivity3);
                document.getElementById('turbineEff').addEventListener('input', updateActivity3);
            }
        }

        // Create animated particles
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 50;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                const size = Math.random() * 5 + 2;
                const startX = Math.random() * window.innerWidth;
                const duration = Math.random() * 10 + 10;
                const delay = Math.random() * 5;
                
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${startX}px`;
                particle.style.bottom = '0';
                particle.style.animationDuration = `${duration}s`;
                particle.style.animationDelay = `${delay}s`;
                
                particlesContainer.appendChild(particle);
            }
        }

        // Navigation and UI Setup
        const navLinks = document.querySelectorAll('.nav-link');
        const sections = document.querySelectorAll('.content-section');
        const menuToggle = document.getElementById('menuToggle');
        const sidebar = document.getElementById('sidebar');
        const scrollTopBtn = document.getElementById('scrollTop');
        const progressBar = document.getElementById('progressBar');
        const mainContent = document.querySelector('.main-content');

        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                navLinks.forEach(l => l.classList.remove('active'));
                sections.forEach(s => s.classList.remove('active'));
                this.classList.add('active');
                const sectionId = this.getAttribute('data-section');
                const targetSection = document.getElementById(sectionId);
                setTimeout(() => targetSection.classList.add('active'), 100);
                sidebar.classList.remove('active');
                mainContent.scrollTo({ top: 0, behavior: 'smooth' });
            });
        });

        menuToggle.addEventListener('click', function() {
            sidebar.classList.toggle('active');
            this.style.transform = sidebar.classList.contains('active') ? 'rotate(90deg)' : 'rotate(0)';
        });

        document.addEventListener('click', function(e) {
            if (window.innerWidth <= 768) {
                if (!sidebar.contains(e.target) && !menuToggle.contains(e.target)) {
                    sidebar.classList.remove('active');
                    menuToggle.style.transform = 'rotate(0)';
                }
            }
        });

        mainContent.addEventListener('scroll', function() {
            const scrollTop = mainContent.scrollTop;
            const scrollHeight = mainContent.scrollHeight - mainContent.clientHeight;
            const scrollPercentage = (scrollTop / scrollHeight) * 100;
            progressBar.style.width = scrollPercentage + '%';
            scrollTopBtn.classList.toggle('visible', scrollTop > 300);
        });

        scrollTopBtn.addEventListener('click', function() {
            mainContent.scrollTo({ top: 0, behavior: 'smooth' });
        });

        function addSVGInteractivity() {
            document.querySelectorAll('.diagram-svg rect, .diagram-svg circle, .diagram-svg ellipse').forEach(element => {
                element.addEventListener('mouseenter', function() {
                    this.style.transform = 'scale(1.1)';
                    this.style.transformOrigin = 'center';
                });
                element.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1)';
                });
            });
        }

        function addTiltEffect() {
            document.querySelectorAll('.info-box').forEach(box => {
                box.addEventListener('mousemove', function(e) {
                    const rect = this.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;
                    const rotateX = (y - centerY) / 10;
                    const rotateY = (centerX - x) / 10;
                    this.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateY(-10px) scale(1.05)`;
                });
                box.addEventListener('mouseleave', function() {
                    this.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) translateY(0) scale(1)';
                });
            });
        }

        window.addEventListener('load', function() {
            createParticles();
            addSVGInteractivity();
            addTiltEffect();
            setupSliderListeners();
            
            // Initialize charts
            charts[1] = initializeChart('powerChart1', 'Total Power (kW)', '#3498db');
            charts[2] = initializeChart('biogasChart2', 'Biogas Output (m¬≥/day)', '#27ae60');
            charts[3] = initializeChart('otecChart3', 'Power Output (MW)', '#9b59b6');
            
            // Initial updates
            if (document.getElementById('windSpeed1')) updateActivity1();
            if (document.getElementById('cattleCount')) updateActivity2();
            if (document.getElementById('surfaceTemp')) updateActivity3();
        });

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && sidebar.classList.contains('active')) {
                sidebar.classList.remove('active');
                menuToggle.style.transform = 'rotate(0)';
            }
        });
    </script>
</body>
</html>
